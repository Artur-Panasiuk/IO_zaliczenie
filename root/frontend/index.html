<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Przyklad Fetch API i Petite Vue</title>
</head>
<body>
    <header>
      <div>
        <img src="./assets/images/logo_temp.png" alt="logo">
      </div>
      <nav>
        <div id="hamburgerMenu" v-scope>
          <div v-if="index == 0"> <!--niezalogowany-->
            <button  @click="login">Zaloguj</button>
            <button  @click="koszyk">Koszyk</button>
          </div>
          <div v-if="index == 1"> <!--zalogowany-->
            <button  @click="koszyk">Koszyk</button>
            <button  @click="zalogowany_wyloguj">Wyloguj</button>
          </div>
          <div v-if="index == 2"> <!--dostawca-->
            <button  @click="dostawca_zamowienia">Zamówienia</button>
            <button  @click="dostawca_ustawienia">Ustawienia</button>
            <button  @click="dostawca_wyloguj">Wyloguj</button>
          </div>
          <div v-if="index == 3"> <!--restaurator-->
            <button  @click="restaurator_menu">Zamówienia</button>
            <button  @click="restaurator_zamowienia">Zamówienia</button>
            <button  @click="restaurator_oceny">Ustawienia</button>
            <button  @click="restaurator_wyloguj">Wyloguj</button>
          </div>
        </div>
      </nav>
    </header>
    <main id="mainContent" v-scope>
        <div v-if="index == 0"> <!--Wprowadź miasto-->
            <form @submit.prevent="submitCity">
                <label for="city">Wprowadź nazwę miasta</label>
                <input type="text" id="city" v-model="city">
                <button type="submit">Szukaj</button>
            </form>
        </div>
        <div v-if="index == 1"> <!--Zaloguj-->

        </div>
        <div v-if="index == 1"><!--Lista Restauracji-->
            <ul>
              <li v-for="restaurant in restaurantsList" :key="restaurant.id">
                {{restaurant.name}}
                <button></button>
              </li>
            </ul>
        </div>
        <div v-if="index == 2"><!--Lista produktów restauracji-->
            <ul>
              <li>

              </li>
            </ul>
        </div>
        <div v-if="index == 3"><!--koszyk-->

        </div>
        <div v-if="index == 4"><!--Status Zamówienia-->

        </div>
        <div v-if="index == 5"><!--Lista dostaw-->

        </div>
        <div v-if="index == 6"><!--Ustawienia dostawcy-->

        </div>
        <div v-if="index == 7"><!--Menu restauracjia-->

        </div>
        <div v-if="index == 8"><!--Zamówienia restauracji-->

        </div>
        <div v-if="index == 9"><!--Oceny restauracji-->

        </div>
    </main>
    <footer>

    </footer>

      <script type="module">
        import { createApp, reactive } from 'https://unpkg.com/petite-vue?module'
        const state = reactive({
          userTypeId: 0,
          pageIndex: 0
        })

        createApp({
          index: state.userTypeId,
          isLogged: false,
          data: null,
          login(){
            fetch('../backend/login.php')
            .then(response => response.json())
            .then(data => {
              console.log(data); // Output the parsed JSON response
            })
            .catch(error => {
              console.error('Error:', error);
            })
          }
        }).mount("#hamburgerMenu")

        createApp({
          index: state.pageIndex,
          city: '',
          restaurantsList: null,
          submitCity(){
            fetch('../backend/restaurants.php', {
              method: 'POST',
              body: city
            })
            .then(res => res.json())
            .then(data => {
              this.restaurantsList = data;
              this.index = 1 //LIST RESTAURACJI
            })
            .catch(err => {
              console.log('Error:', err)
            })
          },
          getItems(){
            fetch('../backend/items.php', {
              method: 'POST',
              body: cityText
            })
          }
        }).mount("#mainContent")
      </script>
</body>
</html>